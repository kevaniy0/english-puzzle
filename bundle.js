/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={gameStats:{level:0,round:0,currentRow:1,maxRoundOfLevel:0,currentPuctire:"",currentAnswerSentence:"",correctSentence:"",autor:"",year:"",pictureName:"",knownSentences:[],unknownSentences:[]},roundsCompleted:{"level 1":[[],!1],"level 2":[[],!1],"level 3":[[],!1],"level 4":[[],!1],"level 5":[[],!1],"level 6":[[],!1]}};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function r(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var i={backgroundHint:!0,pronounceHint:!0,translateHint:!0,pronounceSentence:!0},a=function(){return e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"USER_KEY","english_puzzle_user_1"),r(this,"USER_DATA",null),this.getUser()},o=[{key:"getUser",value:function(){var t=localStorage.getItem(this.USER_KEY);t&&(this.USER_DATA=JSON.parse(t),this.USER_DATA.statistic.gameStats.currentRow=1)}},{key:"createUser",value:function(e){var n={user:e,settings:i,statistic:t};this.USER_DATA=n;var r=JSON.stringify(n);localStorage.setItem("".concat(this.USER_KEY),r)}},{key:"checkUserExistence",value:function(){return!!localStorage.getItem(this.USER_KEY)}},{key:"updateStorage",value:function(){var t=JSON.stringify(this.USER_DATA);localStorage.setItem(this.USER_KEY,t)}},{key:"removeUser",value:function(){localStorage.removeItem(this.USER_KEY),this.USER_DATA=null}},{key:"changeLevel",value:function(t){this.USER_DATA.statistic.gameStats.level=Number(t)-1,this.USER_DATA.statistic.gameStats.round=0,this.clearStart(),this.clearSentences()}},{key:"changeRound",value:function(t){this.USER_DATA.statistic.gameStats.round=Number(t)-1,this.clearStart(),this.clearSentences()}},{key:"clearStart",value:function(){this.USER_DATA.statistic.gameStats.currentRow=1,this.USER_DATA.statistic.gameStats.currentPuctire="",this.USER_DATA.statistic.gameStats.currentAnswerSentence="",this.USER_DATA.statistic.gameStats.correctSentence=""}},{key:"saveCompletedRound",value:function(){var t,e=null===(t=this.USER_DATA)||void 0===t?void 0:t.statistic;if(e){var n="level ".concat(e.gameStats.level+1),r=e.gameStats.round+1;e.roundsCompleted[n][0].includes(r)||e.roundsCompleted[n][0].push(r),e.roundsCompleted[n][0].length===e.gameStats.maxRoundOfLevel&&(e.roundsCompleted[n][1]=!0),5===e.gameStats.round&&e.gameStats.round===e.gameStats.maxRoundOfLevel?(e.gameStats.level=0,e.gameStats.round=0):e.gameStats.round===e.gameStats.maxRoundOfLevel?(e.gameStats.level+=1,e.gameStats.round=0):e.gameStats.round+=1}}},{key:"addToKnown",value:function(t){var e;null===(e=this.USER_DATA)||void 0===e||e.statistic.gameStats.knownSentences.push([this.USER_DATA.statistic.gameStats.correctSentence,t]),this.updateStorage()}},{key:"addToUnknown",value:function(t){var e;null===(e=this.USER_DATA)||void 0===e||e.statistic.gameStats.unknownSentences.push([this.USER_DATA.statistic.gameStats.correctSentence,t]),this.updateStorage()}},{key:"clearSentences",value:function(){this.USER_DATA.statistic.gameStats.knownSentences.length=0,this.USER_DATA.statistic.gameStats.unknownSentences.length=0,this.updateStorage()}}],o&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o}();const c=new a;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}const f=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=null,this.createElement(e)},(e=[{key:"createElement",value:function(t){this.element=document.createElement(t.tag),this.setCssClasses(t.className),t.textContent&&this.setTextContent(t.textContent),t.callback&&this.setCallback(t.callback)}},{key:"setCssClasses",value:function(t){var e=this;t.forEach((function(t){var n;return null===(n=e.element)||void 0===n?void 0:n.classList.add(t)}))}},{key:"setTextContent",value:function(t){this.element&&(this.element.textContent=t)}},{key:"setCallback",value:function(t){var e;null===(e=this.element)||void 0===e||e.addEventListener("click",(function(e){return t(e)}))}},{key:"getElement",value:function(){return this.element}}])&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}const g=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=this.createView(e)},(e=[{key:"createView",value:function(t){return new f(t)}},{key:"getViewHtml",value:function(){return this.view.getElement()}}])&&d(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();var v={tag:"h1",className:["logo","header-logo"],textContent:"English Puzzle"},h={tag:"a",className:["logout"]},y={tag:"div",className:["popup-wrapper"]},b={tag:"div",className:["popup","logout-popup"]},w={tag:"h3",className:["popup-title"],textContent:"Are you sure you want to log out? All your results will be permanently deleted"},E={tag:"div",className:["popup-btn-wrapper"]},S={tag:"button",className:["popup-btn","popup-btn_yes"],textContent:"YES"},k={tag:"button",className:["popup-btn","popup-btn_no"],textContent:"NO"},_={tag:"img",className:["popup-img","popup-logout-img"]};function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var P=function(){return t=function t(e,n,r,o,i,a,c,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.router=e,this.popup=this.createPopup(n,r,o,i,a,c,u,l)},e=[{key:"createPopup",value:function(t,e,n,r,o,i,a,c){var u=this,l=new f(t);l.getElement().hidden=!0;var s=new f(e);l.getElement().append(s.getElement());var p=new f(n);p.getElement().src="./assets/img/user.png",s.getElement().append(p.getElement());var d=new f(r);this.changeTitleColors(d);var m=new f(o),g=new f(i),v=new f(a);return m.getElement().append(g.getElement(),v.getElement()),s.getElement().append(d.getElement(),m.getElement()),l.getElement().addEventListener("click",(function(t){var e=t.target;e instanceof Element&&(e.classList.contains("popup-btn_yes")?(u.confirmLogout(c),u.router.navigate("login")):(e.classList.contains("popup-btn_no")||e.classList.contains("logout-popup"))&&(l.getElement().hidden=!0))})),l}},{key:"changeTitleColors",value:function(t){var e=t.getElement().textContent.split(" "),n=e.splice(-2).join(" "),r=new f({tag:"span",className:["title-span"]});return r.getElement().textContent=n,t.getElement().textContent=e.join(" ")+" ",t.getElement().append(r.getElement()),t}},{key:"getElement",value:function(){return this.popup.getElement()}},{key:"confirmLogout",value:function(t){c.removeUser(),this.getElement().hidden=!0,t.getElement().style.display="none"}}],e&&C(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const T=P;function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function R(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}const F=new(function(){return t=function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n="events",r=new Map,(n=R(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r},(e=[{key:"subscribe",value:function(t,e){if(this.events.has(t)){var n=this.events.get(t);n&&n.push(e)}else{var r=[];r.push(e),this.events.set(t,r)}}},{key:"unsubscribe",value:function(t,e){if(this.events.has(t)){var n=this.events.get(t).filter((function(t){return t!==e}));this.events.set(t,n)}}},{key:"once",value:function(t,e){var n=this;this.subscribe(t,(function r(o){e(o),n.unsubscribe(t,r)}))}},{key:"emit",value:function(t,e){var n=this.events.get(t);n&&n.forEach((function(t){return t(e)}))}}])&&L(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}());var D=function(t){t.style.display="block"},B=function(t){t.style.display="none"},x=function(t){t.classList.add("header-login-page")},U=function(t){t.classList.remove("header-login-page")};function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:e+""}function V(t,e,n){return e=Y(e),function(t,e){if(e&&("object"==N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,z()?Reflect.construct(e,n||[],Y(t).constructor):e.apply(t,n))}function z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(z=function(){return!!t})()}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}var G=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=V(this,e,[{tag:"header",className:["header"]}])).router=t,n.configureView(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(e,t),n=e,(r=[{key:"createTitle",value:function(t){return new f(t)}},{key:"createLogout",value:function(t){return new f(t)}},{key:"createPopup",value:function(t){return new T(this.router,b,y,_,w,E,S,k,t)}},{key:"configureView",value:function(){var t=this.createTitle(v);this.view.getElement().append(t.getElement());var e=this.createLogout(h);F.subscribe("showLogoutButton",D.bind(null,e.getElement())),F.subscribe("hideLogoutButton",B.bind(null,e.getElement())),F.subscribe("addMarginForLoginPage",x.bind(null,this.getViewHtml())),F.subscribe("removeMarginForLoginPage",U.bind(null,this.getViewHtml()));var n=this.createPopup(e);this.view.getElement().append(n.getElement()),this.view.getElement().append(e.getElement()),e.getElement().addEventListener("click",(function(){n.getElement().hidden=!1}))}}])&&H(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);const M=G;function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J(r.key),r)}}function J(t){var e=function(t,e){if("object"!=W(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}const $=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=this.createForm(e)},(e=[{key:"createForm",value:function(t){return new f(t)}},{key:"validateField",value:function(t,e){var n=this;t.addEventListener("input",(function(){/^[A-Za-z-]*$/.test(t.value)?t.classList.contains("login_input_last-name")&&t.value.length<4?(n.createErrorField(t),e.textContent="At least 4 letters in the second name"):t.value.length<3?(n.createErrorField(t),e.textContent="At least 3 letters in the name"):t.value[0]!==t.value[0].toUpperCase()?(n.createErrorField(t),e.textContent="The first letter must be in a upper case"):(n.removeErrorField(t),e.textContent=" "):(n.createErrorField(t),e.textContent="Only English alphabet and symbol(-) ")}))}},{key:"createInputField",value:function(t,e,n){var r=new f(t),o=new f(e),i=new f(n);return this.validateField(o.getElement(),i.getElement()),this.form.getElement().append(r.getElement(),o.getElement(),i.getElement()),o}},{key:"createErrorField",value:function(t){t.style.cssText="border: 1px solid red",t.classList.remove("login_input-valid"),t.classList.add("login_input-invalid")}},{key:"removeErrorField",value:function(t){t.style.cssText="",t.classList.remove("login_input-invalid"),t.classList.add("login_input-valid"),t.style.cssText="border: 1px solid green"}},{key:"createLoginButton",value:function(t){var e=new f(t);return e.getElement().disabled=!0,this.form.getElement().append(e.getElement()),e}},{key:"checkButtonStatus",value:function(t,e,n){function r(){t.classList.contains("login_input-valid")&&e.classList.contains("login_input-valid")?n.disabled=!1:n.disabled=!0}t.addEventListener("input",r),e.addEventListener("input",r)}},{key:"getElement",value:function(){return this.form.getElement()}}])&&K(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();var Z={tag:"form",className:["login_form"]},q={tag:"section",className:["login_section"]},Q={tag:"h2",className:["login_title"],textContent:"Sign In"},tt={tag:"label",className:["login_label","login_label_name"],textContent:"First Name"},et={tag:"label",className:["login_label","login_label_last-name"],textContent:"Last Name"},nt={tag:"input",className:["login_input","login_input_name"]},rt={tag:"input",className:["login_input","login_input_last-name"]},ot={tag:"span",className:["input_span","input-span_name"],textContent:" "},it={tag:"span",className:["input_span","input-span_last-name"],textContent:" "},at={tag:"button",className:["login_btn","btn"],textContent:"Login"};function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lt(r.key),r)}}function lt(t){var e=function(t,e){if("object"!=ct(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ct(e)?e:e+""}function st(t,e,n){return e=pt(e),function(t,e){if(e&&("object"==ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ft()?Reflect.construct(e,n||[],pt(t).constructor):e.apply(t,n))}function ft(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ft=function(){return!!t})()}function pt(t){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pt(t)}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}var mt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=st(this,e,[q])).router=t,n.configureView(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(e,t),n=e,r=[{key:"createTitle",value:function(t){return new f(t)}},{key:"createLoginForm",value:function(){var t=this,e=new $(Z),n=e.createInputField(tt,nt,ot),r=e.createInputField(et,rt,it),o=e.createLoginButton(at);o.getElement().addEventListener("click",(function(e){e.preventDefault();var o=n.getElement().value,i=r.getElement().value;c.createUser({firstName:o,lastName:i}),F.emit("removeMarginForLoginPage"),t.router.navigate("greeting")})),e.checkButtonStatus(n.getElement(),r.getElement(),o.getElement()),this.view.getElement().append(e.getElement())}},{key:"configureView",value:function(){var t=this.createTitle(Q);this.view.getElement().append(t.getElement()),this.createLoginForm(),F.emit("addMarginForLoginPage")}}],r&&ut(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);const gt=mt;var vt={tag:"div",className:["auto-resume-game"]},ht={tag:"p",className:["resume-title"],textContent:"The game was resumed!"};function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wt(r.key),r)}}function wt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:e+""}function Et(t,e,n){return e=kt(e),function(t,e){if(e&&("object"==yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,St()?Reflect.construct(e,n||[],kt(t).constructor):e.apply(t,n))}function St(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(St=function(){return!!t})()}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}function _t(t,e){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_t(t,e)}const At=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Et(this,e,[vt])).title=t.createTitle(),t.configureView(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_t(t,e)}(e,t),n=e,(r=[{key:"createTitle",value:function(){return new f(ht)}},{key:"hideComponent",value:function(){var t=this;setTimeout((function(){t.view.getElement().hidden=!0}),4e3)}},{key:"configureView",value:function(){this.view.getElement().append(this.title.getElement()),this.hideComponent()}}])&&bt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);var Ct={tag:"section",className:["game-section"]},Ot={tag:"div",className:["game-field"]},Pt={tag:"div",className:["game-field__rows-field"]},Tt={tag:"div",className:["game-field__row"]},jt={tag:"div",className:["game-field__source-words"]},Lt={tag:"div",className:["autor-block","show-autor"]};function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Ft(){Ft=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new j(r||[]);return o(a,"_invoke",{value:C(t,n,c)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="suspendedYield",m="executing",g="completed",v={};function h(){}function y(){}function b(){}var w={};l(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(L([])));S&&S!==n&&r.call(S,a)&&(w=S);var k=b.prototype=h.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Rt(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=p;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=O(c,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?g:d,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Rt(e)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},_(A.prototype),l(A.prototype,c,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new A(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Dt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Bt(){var t;return t=Ft().mark((function t(e){var n,r;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if((n=t.sent).ok){t.next=6;break}throw new Error("HTTP error! status: ".concat(n.status));case 6:return t.next=8,n.json();case 8:return r=t.sent,t.abrupt("return",r);case 12:throw t.prev=12,t.t0=t.catch(0),console.error("Error fetching the JSON:",t.t0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})),Bt=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Dt(i,r,o,a,c,"next",t)}function c(t){Dt(i,r,o,a,c,"throw",t)}a(void 0)}))},Bt.apply(this,arguments)}const xt=function(t){return Bt.apply(this,arguments)},Ut=function(t,e){for(var n=t.clientWidth,r=0,o=0;o<e.length;o+=1)r+=e[o].textContent.length;for(var i=0;i<e.length;i+=1){var a=e[i].textContent.length/r*n;e[i].style.width="".concat(a,"px")}},Nt=function(t,e,n){var r=t.parentElement,o=null;if(r.classList.contains("game-field__source-words")?(o=Array.from(e.children).find((function(t){return t.classList.contains("clear-card")})))&&(o.style.width=t.style.width,o.id="clear_".concat(t.id)):r.classList.contains("game-field__row")&&(o=Array.from(n.children).find((function(e){return e.id==="clear_".concat(t.id)})))&&o.removeAttribute("id"),o){var i=t.parentElement,a=o.parentElement,c=document.createElement("div");null==i||i.replaceChild(c,t),null==a||a.replaceChild(t,o),null==i||i.replaceChild(o,c)}};var Ht={tag:"div",className:["hints"]},It={tag:"div",className:["sentence-wrapper"]},Vt={tag:"p",className:["translation-sentence"]},zt={tag:"div",className:["hint-icons"]},Yt={tag:"button",className:["hint-icon","translate-button","translate-button--on"]},Xt={tag:"span",className:["translate-span"]},Gt={tag:"button",className:["hint-icon","pronounce-button"]},Mt={tag:"span",className:["loader-audio"]},Wt={tag:"span",className:["pronounce-span"]},Kt="Pronounce Sentence",Jt={tag:"button",className:["hint-icon","pronounce-hint-button","pronounce-hint-button--on"]},$t={tag:"span",className:["pronounce-hint-span"]},Zt={tag:"button",className:["hint-icon","background-hint-button","background-hint-button--on"]},qt={tag:"span",className:["background-hint-span"]};function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ee(r.key),r)}}function ee(t){var e=function(t,e){if("object"!=Qt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qt(e)?e:e+""}function ne(t,e,n){return e=oe(e),function(t,e){if(e&&("object"==Qt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,re()?Reflect.construct(e,n||[],oe(t).constructor):e.apply(t,n))}function re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(re=function(){return!!t})()}function oe(t){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oe(t)}function ie(t,e){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ie(t,e)}const ae=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ne(this,e,[Ht])).translationSentence=t.createTranslate(),t.translationIcon=t.createIcon(Yt,Xt,"Translate Sentence"),t.pronounceSentence=t.createPronounceButton(),t.pronounceHintIcon=t.createIcon(Jt,$t,"Enable/Disable pronounce hint"),t.backgroundHintIcon=t.createIcon(Zt,qt,"show/hide background puzzle"),t.audioFile=null,t.configureView(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ie(t,e)}(e,t),n=e,(r=[{key:"createTranslate",value:function(){return new f(Vt)}},{key:"createHintIcons",value:function(){return new f(zt)}},{key:"createPronounceButton",value:function(){var t=this.createIcon(Gt,Wt,Kt),e=t.getElement().firstElementChild,n=new f(Mt);return F.subscribe("showLoader",(function(){return n.getElement().classList.add("loader-on")})),F.subscribe("hideLoader",(function(){return n.getElement().classList.remove("loader-on")})),e.append(n.getElement()),t.getElement().title=Kt,t}},{key:"createIcon",value:function(t,e,n){var r=new f(t),o=new f(e);return r.getElement().append(o.getElement()),r.getElement().title=n,r}},{key:"getAudio",value:function(t,e,n){var r=t.rounds[e].words[n-1].audioExample,o="".concat("https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/").concat(r);return new Audio(o)}},{key:"configureView",value:function(){var t=this.createHintIcons();t.getElement().append(this.translationIcon.getElement(),this.pronounceHintIcon.getElement(),this.backgroundHintIcon.getElement());var e=new f(It);e.getElement().append(this.pronounceSentence.getElement(),this.translationSentence.getElement()),this.view.getElement().append(t.getElement(),e.getElement())}}])&&te(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);var ce={tag:"div",className:["game-button-field"]},ue={tag:"button",className:["btn","btn-continue"],textContent:"Continue"},le={tag:"button",className:["btn","btn-results"],textContent:"Results"},se={tag:"button",className:["btn","btn-check"],textContent:"Check"},fe={tag:"button",className:["btn","btn-auto-complete","btn--active"],textContent:"Auto-Complete"};function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,me(r.key),r)}}function me(t){var e=function(t,e){if("object"!=pe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pe(e)?e:e+""}function ge(t,e,n){return e=he(e),function(t,e){if(e&&("object"==pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ve()?Reflect.construct(e,n||[],he(t).constructor):e.apply(t,n))}function ve(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ve=function(){return!!t})()}function he(t){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},he(t)}function ye(t,e){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ye(t,e)}const be=function(t){function e(t,n,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ge(this,e,[ce])).checkButton=i.createButton(se,t),i.continueButton=i.createButton(ue,n),i.resultsButton=i.createButton(le,r),i.autoCompleteButton=i.createButton(fe,o),i.configureView(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ye(t,e)}(e,t),n=e,(r=[{key:"createButton",value:function(t,e){var n=new f(t);return n.setCallback(e),n}},{key:"showButton",value:function(t){t.style.display="block",t.classList.add("btn--active"),(t.classList.contains("btn-continue")||t.classList.contains("btn-results"))&&t.classList.add("btn-continue-animate")}},{key:"hideButton",value:function(t){t.style.display="none",t.classList.remove("btn--active"),(t.classList.contains("btn-continue")||t.classList.contains("btn-results"))&&t.classList.remove("btn-continue-animate")}},{key:"enableButton",value:function(t){t.disabled=!1,t.classList.add("btn--active")}},{key:"disableButton",value:function(t){t.disabled=!0,t.classList.remove("btn--active")}},{key:"configureView",value:function(){this.view.getElement().append(this.checkButton.getElement(),this.autoCompleteButton.getElement(),this.continueButton.getElement(),this.resultsButton.getElement())}}])&&de(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);var we={tag:"div",className:["selection-field"]},Ee={tag:"div",className:["level-wrapper"]},Se={tag:"label",className:["level-title"],textContent:"Level:"},ke={tag:"select",className:["level-select"]},_e={tag:"div",className:["round-wrapper"]},Ae={tag:"label",className:["round-title"],textContent:"Round:"},Ce={tag:"select",className:["round-select"]};function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Te(r.key),r)}}function Te(t){var e=function(t,e){if("object"!=Oe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oe(e)?e:e+""}function je(t,e,n){return e=Re(e),function(t,e){if(e&&("object"==Oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Le()?Reflect.construct(e,n||[],Re(t).constructor):e.apply(t,n))}function Le(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Le=function(){return!!t})()}function Re(t){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Re(t)}function Fe(t,e){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fe(t,e)}const De=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=je(this,e,[we])).levelSelect=r.createSelect(ke,t),r.roundSelect=r.createSelect(Ce,n),r.configureView(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fe(t,e)}(e,t),n=e,(r=[{key:"createSelect",value:function(t,e){var n=new f(t);return n.getElement().classList.contains("level-select")&&this.createLevelOptions(n.getElement()),n.getElement().addEventListener("change",e),n.getElement().addEventListener("click",(function(){var t,e,r;null!==(t=n.getElement().parentElement)&&void 0!==t&&t.classList.contains("select-open")?null===(e=n.getElement().parentElement)||void 0===e||e.classList.remove("select-open"):null===(r=n.getElement().parentElement)||void 0===r||r.classList.add("select-open")})),n.getElement().addEventListener("blur",(function(){var t;null===(t=n.getElement().parentElement)||void 0===t||t.classList.remove("select-open")})),n}},{key:"createLevelOptions",value:function(t){for(var e=0;e<6;e+=1){var n,r=new f({tag:"option",className:["option-level"],textContent:String(e+1)});null!==(n=c.USER_DATA)&&void 0!==n&&n.statistic.roundsCompleted["level ".concat(e+1)][1]&&(r.getElement().style.backgroundColor="green"),t.append(r.getElement())}}},{key:"updateRoundOptions",value:function(t){for(var e=this;this.roundSelect.getElement().options.length>0;)this.roundSelect.getElement().remove(0);for(var n=function(t){var n,r,o,i=new f({tag:"option",className:["option-round-".concat(t+1)],textContent:String(t+1)});e.roundSelect.getElement().append(i.getElement()),null!==(n=c.USER_DATA)&&void 0!==n&&n.statistic.roundsCompleted["level ".concat((null===(r=c.USER_DATA)||void 0===r?void 0:r.statistic.gameStats.level)+1)][0].find((function(e){return e===t+1}))&&(i.getElement().style.backgroundColor="green"),t===(null===(o=c.USER_DATA)||void 0===o?void 0:o.statistic.gameStats.round)&&(e.roundSelect.getElement().value=String(t+1))},r=0;r<t;r+=1)n(r)}},{key:"updateLevel",value:function(t,e){for(var n=Array.from(this.levelSelect.getElement().options),r=0;r<n.length;r+=1){var o;(null===(o=c.USER_DATA)||void 0===o?void 0:o.statistic.roundsCompleted["level ".concat(r+1)].length)===e&&(n[r].style.backgroundColor="green")}this.levelSelect.getElement().value=String(t)}},{key:"configureView",value:function(){var t=new f(Ee),e=new f(Se);t.getElement().append(e.getElement(),this.levelSelect.getElement());var n=new f(_e),r=new f(Ae);n.getElement().append(r.getElement(),this.roundSelect.getElement()),this.view.getElement().append(t.getElement(),n.getElement())}}])&&Pe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function Be(t){return!!t.every((function(t,e){return t.id==="w".concat(e)}))}var xe={tag:"div",className:["statistic-view"]},Ue={tag:"div",className:["statistic-wrapper"]},Ne={tag:"button",className:["btn","stats-continue-btn"],textContent:"Continue"},He={tag:"div",className:["sentences-field","known-field"]},Ie={tag:"div",className:["sentences-field","unknown-field"]},Ve={tag:"p",className:["known-title","stat-title"],textContent:"I know:"},ze={tag:"p",className:["unknown-title","stat-title"],textContent:"I don't know:"},Ye={tag:"div",className:["sentences-wrapper"]},Xe={tag:"p",className:["sentence-item"]},Ge={tag:"span",className:["audio-icon"]},Me={tag:"span",className:["audio-loader"]},We={tag:"img",className:["image-art"]},Ke={tag:"p",className:["art-info"]};function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,en(r.key),r)}}function Ze(t,e,n){return e=Qe(e),function(t,e){if(e&&("object"==Je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qe()?Reflect.construct(e,n||[],Qe(t).constructor):e.apply(t,n))}function qe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qe=function(){return!!t})()}function Qe(t){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qe(t)}function tn(t,e){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tn(t,e)}function en(t){var e=function(t,e){if("object"!=Je(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Je(e)?e:e+""}var nn=function(t){function e(t){var n,r,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=n=Ze(this,e,[xe]),i=[],(o=en(o="audioAndLabel"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,n.continueButton=n.createContinueButton(t),n.knownField=n.createSentencesField(He),n.unknownField=n.createSentencesField(Ie),n.image=n.createImage(),n.info=n.createInfo(),n.statsWrapper=n.createWrapper(),n.configureView(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tn(t,e)}(e,t),n=e,r=[{key:"createContinueButton",value:function(t){var e=new f(Ne);return e.getElement().addEventListener("click",t),e}},{key:"createSentencesField",value:function(t){return new f(t)}},{key:"createWrapper",value:function(){return new f(Ye)}},{key:"createImage",value:function(){return new f(We).getElement()}},{key:"createInfo",value:function(){return new f(Ke).getElement()}},{key:"onClickHideView",value:function(){var t=this;this.view.getElement().addEventListener("click",(function(e){e.target.classList.contains("statistic-view")&&(t.view.getElement().style.display="none")}))}},{key:"clearFields",value:function(){for(;this.knownField.getElement().firstElementChild;){var t;null===(t=this.knownField.getElement().firstElementChild)||void 0===t||t.remove()}for(;this.unknownField.getElement().firstElementChild;){var e;null===(e=this.unknownField.getElement().firstElementChild)||void 0===e||e.remove()}}},{key:"createAudioIcon",value:function(t){var e=this,n=new f(Ge),r=new f(Me);return n.getElement().append(r.getElement()),this.audioAndLabel.push([t,r.getElement()]),n.getElement().addEventListener("click",(function(){e.audioAndLabel.forEach((function(t){t[0].pause(),t[0].currentTime=0,t[1].classList.remove("audio-loader-on")})),t.play(),r.getElement().classList.add("audio-loader-on"),t.addEventListener("ended",(function(){r.getElement().classList.remove("audio-loader-on")}))})),n}},{key:"fillFields",value:function(){var t,e=this,n=null===(t=c.USER_DATA)||void 0===t?void 0:t.statistic.gameStats;n&&(this.clearFields(),n.knownSentences.forEach((function(t){var n=new f(Xe);n.setTextContent(t[0]);var r=e.createAudioIcon(t[1]);n.getElement().prepend(r.getElement()),e.knownField.getElement().append(n.getElement())})),n.unknownSentences.forEach((function(t){var n=new f(Xe);n.setTextContent(t[0]);var r=e.createAudioIcon(t[1]);n.getElement().prepend(r.getElement()),e.unknownField.getElement().append(n.getElement())})),this.image.src=c.USER_DATA.statistic.gameStats.currentPuctire,this.info.textContent="".concat(c.USER_DATA.statistic.gameStats.autor,'  -  "').concat(c.USER_DATA.statistic.gameStats.pictureName,'",  ').concat(c.USER_DATA.statistic.gameStats.year))}},{key:"configureView",value:function(){var t=new f(Ue),e=new f(Ve),n=new f(ze);this.statsWrapper.getElement().append(this.image,this.info,e.getElement(),this.knownField.getElement(),n.getElement(),this.unknownField.getElement()),t.getElement().append(this.statsWrapper.getElement(),this.continueButton.getElement()),this.view.getElement().append(t.getElement()),this.onClickHideView()}}],r&&$e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);const rn=nn;function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function an(t){return function(t){if(Array.isArray(t))return cn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return cn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mn(r.key),r)}}function ln(t,e,n){return e=fn(e),function(t,e){if(e&&("object"==on(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sn()?Reflect.construct(e,n||[],fn(t).constructor):e.apply(t,n))}function sn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sn=function(){return!!t})()}function fn(t){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fn(t)}function pn(t,e){return pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pn(t,e)}function dn(t,e,n){return(e=mn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mn(t){var e=function(t,e){if("object"!=on(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=on(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==on(e)?e:e+""}var gn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dn(n=ln(this,e,[Ct]),"checkDrag",{element:null,DRAX_PX:5,startX:0,startY:0,currentX:0,currentY:0}),dn(n,"dragging",!1),dn(n,"timer",{removeClasses:null}),dn(n,"autoCompleteFlag",!1),dn(n,"onPointerDown",(function(t){if("mouse"!==t.pointerType||0===t.button){var e=t.target;e.classList.contains("source-word")&&(n.checkDrag.element=e,n.dragging=!1,n.checkDrag.startX=t.clientX,n.checkDrag.startY=t.clientY,n.checkDrag.currentX=t.clientX,n.checkDrag.currentY=t.clientY,e.classList.add("source-word--selected"))}})),dn(n,"onPointerMove",(function(t){n.checkDrag.element&&(n.wasDraggin(t.clientX,t.clientY)&&(n.dragging=!0),document.body.style.cursor="grabbing",n.checkDrag.element.style.cursor="grabbing",n.checkDrag.currentX=t.clientX,n.checkDrag.currentY=t.clientY,n.checkDrag.element.style.transform="translate(".concat(n.checkDrag.currentX-n.checkDrag.startX,"px, ").concat(n.checkDrag.currentY-n.checkDrag.startY,"px)"))})),dn(n,"onPointerUp",(function(t){var e,r;if(("mouse"!==t.pointerType||0===t.button)&&n.checkDrag.element&&t.target.classList.contains("source-word")){n.dragging=!1;var o=n.checkDrag.element;o.style.zIndex="-1";var i=document.elementFromPoint(t.clientX,t.clientY),a=i.parentElement,u=n.checkDrag.element.parentElement;if(null!==(e=o.parentElement)&&void 0!==e&&e.classList.contains("game-field__source-words"))i.classList.contains("row-".concat(c.USER_DATA.statistic.gameStats.currentRow))||i.classList.contains("clear-card")&&null!=a&&a.classList.contains("row-".concat(c.USER_DATA.statistic.gameStats.currentRow))?Nt(o,n.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1],n.sourceBlock):i.classList.contains("source-word")&&null!=a&&a.classList.contains("row-".concat(c.USER_DATA.statistic.gameStats.currentRow))&&(Nt(o,n.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1],n.sourceBlock),n.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1].insertBefore(o,i));else if(null!==(r=o.parentElement)&&void 0!==r&&r.classList.contains("row-".concat(c.USER_DATA.statistic.gameStats.currentRow)))if(i.classList.contains("source-word")&&null!=a&&a.classList.contains("row-".concat(c.USER_DATA.statistic.gameStats.currentRow))){var l=document.createElement("div");null==u||u.replaceChild(l,o),null==u||u.replaceChild(o,i),null==u||u.replaceChild(i,l)}else null!=a&&a.classList.contains("game-field__source-words")&&Nt(o,n.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1],n.sourceBlock);n.updateAnswerSentence(n.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1]),n.checkFullFilledRow(n.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1]),document.body.style.cursor="",o.style.cursor="",o.style.transform="",o.classList.add("source-word--up"),o.classList.remove("source-word--selected"),setTimeout((function(){return o.classList.remove("source-word--up")}),501),setTimeout((function(){return o.style.zIndex=""}),1),n.checkDrag.element=null}})),dn(n,"enableTranslateHint",(function(t){t.classList.remove("translate-button--off"),t.classList.add("translate-button--on"),n.hints.translationSentence.getElement().hidden=!1,c.USER_DATA.settings.translateHint=!0})),dn(n,"disableTranslateHint",(function(t){t.classList.remove("translate-button--on"),t.classList.add("translate-button--off"),n.hints.translationSentence.getElement().hidden=!0,c.USER_DATA.settings.translateHint=!1})),dn(n,"onPronounceClick",(function(){n.hints.pronounceSentence.getElement().addEventListener("click",(function(){n.hints.audioFile&&(n.hints.audioFile.play(),F.emit("showLoader"),n.hints.audioFile.addEventListener("ended",(function(){F.emit("hideLoader")})))}))})),dn(n,"onPronounceHintClick",(function(){var t=n.hints.pronounceHintIcon.getElement();t.addEventListener("click",(function(){c.USER_DATA.settings.pronounceHint?n.disablePronounceHint(t):n.enablePronounceHint(t),c.updateStorage()}))})),dn(n,"onBackgroundHintClick",(function(){var t=n.hints.backgroundHintIcon.getElement();t.addEventListener("click",(function(){c.USER_DATA.settings.backgroundHint?n.disableBackgroundHint(t):n.enableBackgroundHint(t),c.updateStorage()}))})),n.router=t,n.gameField=n.createGameField(),n.rowField=n.createRowsField(),n.sourceBlock=n.createSourceBlock(),n.collection=xt("./data/wordCollectionLevel".concat(c.USER_DATA.statistic.gameStats.level+1,".json")),n.hints=new ae,n.buttonField=new be(n.onClickCheck.bind(n),n.onClickContinue.bind(n),n.onClickResults.bind(n),n.onClickAutoComplete.bind(n)),n.selectionField=new De(n.onChangeLevel.bind(n),n.onChangeRound.bind(n)),n.statisticView=new rn(n.onClickContinue.bind(n)),n.configureView(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pn(t,e)}(e,t),n=e,r=[{key:"createGameField",value:function(){return new f(Ot).getElement()}},{key:"createRowsField",value:function(){return new f(Pt).getElement()}},{key:"createCard",value:function(t){return new f(t).getElement()}},{key:"createSourceBlock",value:function(){return new f(jt).getElement()}},{key:"createCurrentSourceWords",value:function(t){var e=this,n=[];t.forEach((function(r,o){var i=e.createCard({tag:"div",className:["source-word","source-word-".concat(o+1)]});i.textContent=r,i.id="w".concat(o),0===o&&i.classList.add("first-puzzle"),o===t.length-1&&i.classList.add("last-puzzle"),n.push(i)})),function(t){for(var e=t,n=e.length,r=0;n>0;){r=Math.floor(Math.random()*n),n-=1;var o=[e[r],e[n]];e[n]=o[0],e[r]=o[1]}}(n),n.forEach((function(t){return e.sourceBlock.append(t)})),this.onClickCard=this.createCallbackCard.bind(this),this.gameField.addEventListener("pointerup",this.onClickCard)}},{key:"addBackgroundAsPuzzle",value:function(){var t=Array.from(this.sourceBlock.children);t.sort((function(t,e){return Number(t.id.slice(1))-Number(e.id.slice(1))}));for(var e=0,n=this.rowField.clientWidth,r=this.rowField.clientHeight,o=0;o<t.length;o+=1){t[o].style.backgroundSize="".concat(n,"px ").concat(r,"px"),t[o].style.setProperty("--after-backgroundSize","".concat(n,"px ").concat(r,"px")),t[o].style.backgroundPosition="-".concat(e,"px -").concat(40*(c.USER_DATA.statistic.gameStats.currentRow-1),"px");var i=(e+=parseFloat(t[o].style.width))-2,a=40*(c.USER_DATA.statistic.gameStats.currentRow-1)+11.5;t[o].style.setProperty("--after-backgroundPosition","-".concat(i,"px -").concat(a,"px"))}}},{key:"toggleBackground",value:function(){var t=this,e=Array.from(this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1].children);if(!Be(e)){var n=[];Array.from(this.sourceBlock.children).forEach((function(t){t.classList.contains("source-word")&&n.push(t)})),e.forEach((function(t){t.classList.contains("source-word")&&n.push(t)})),n.forEach((function(e){t.hints.backgroundHintIcon.getElement().classList.contains("background-hint-button--on")?(e.style.backgroundImage="url(".concat(c.USER_DATA.statistic.gameStats.currentPuctire,")"),e.style.setProperty("--after-backgroundImage","url(".concat(c.USER_DATA.statistic.gameStats.currentPuctire,")"))):(e.style.backgroundImage="none",e.style.setProperty("--after-backgroundImage","none"))}))}}},{key:"showBackgroundOnCorrect",value:function(){Array.from(this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1].children).forEach((function(t){t.style.backgroundImage="url(".concat(c.USER_DATA.statistic.gameStats.currentPuctire,")"),t.style.setProperty("--after-backgroundImage","url(".concat(c.USER_DATA.statistic.gameStats.currentPuctire,")"))}))}},{key:"configureAsnwerRow",value:function(){for(var t=Array.from(this.sourceBlock.children).length,e=0;e<t;e+=1){var n=this.createCard({tag:"div",className:["clear-card"]});this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1].append(n)}}},{key:"configureGame",value:function(){var t=this;this.updateSourceBlock(),this.collection.then((function(e){var n=e.rounds[c.USER_DATA.statistic.gameStats.round].words[c.USER_DATA.statistic.gameStats.currentRow-1].textExample.split(" ");t.gameField.classList.remove("game-section-open-background"),t.buttonField.hideButton(t.buttonField.resultsButton.getElement()),t.autoCompleteFlag=!1;var r=c.USER_DATA.statistic.gameStats;r.correctSentence=n.join(" "),r.maxRoundOfLevel=e.roundsCount,r.autor=e.rounds[r.round].levelData.author,r.year=e.rounds[r.round].levelData.year,r.pictureName=e.rounds[r.round].levelData.name,t.selectionField.updateLevel(r.level+1,e.roundsCount),t.selectionField.updateRoundOptions(e.roundsCount),t.hints.translationSentence.setTextContent(e.rounds[r.round].words[r.currentRow-1].textExampleTranslate),t.hints.audioFile=t.hints.getAudio(e,r.round,r.currentRow),r.currentPuctire="".concat("https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/").concat(e.rounds[r.round].levelData.imageSrc),t.hints.translationIcon.getElement().classList.contains("translate-button--off")&&(t.hints.translationSentence.getElement().hidden=!0),t.hints.pronounceHintIcon.getElement().classList.contains("pronounce-hint-button--on")||(t.hints.pronounceSentence.getElement().hidden=!0),t.createCurrentSourceWords(n);var o=Array.from(t.sourceBlock.children);t.configureAsnwerRow(),t.onDragCard(),Ut(t.rowField,o),t.addBackgroundAsPuzzle(),t.toggleBackground(),window.addEventListener("resize",(function(){Ut(t.rowField,o)})),"none"!==t.buttonField.continueButton.getElement().style.display&&(t.buttonField.hideButton(t.buttonField.continueButton.getElement()),t.buttonField.showButton(t.buttonField.checkButton.getElement())),t.buttonField.disableButton(t.buttonField.checkButton.getElement()),t.buttonField.showButton(t.buttonField.autoCompleteButton.getElement())}))}},{key:"updateRowField",value:function(){for(;this.rowField.firstElementChild;)this.rowField.firstElementChild.remove();for(var t=0;t<10;t+=1){var e=new f(Tt);e.getElement().classList.add("row-".concat(t+1)),this.rowField.append(e.getElement())}}},{key:"updateSourceBlock",value:function(){for(;this.sourceBlock.firstElementChild;)this.sourceBlock.firstElementChild.remove()}},{key:"createCallbackCard",value:function(t){var e=t.target;if(e.classList.contains("source-word")&&!this.wasDraggin(t.clientX,t.clientY)){e.classList.remove("paint-wrong","paint-true","source-word--selected");var n=Array.from(this.rowField.children)[c.USER_DATA.statistic.gameStats.currentRow-1];Nt(e,n,this.sourceBlock),this.updateAnswerSentence(n),this.checkFullFilledRow(n),this.dragging=!1}}},{key:"onClickCheck",value:function(){var t=Array.from(this.rowField.children)[c.USER_DATA.statistic.gameStats.currentRow-1];Be(Array.from(t.children))||this.paintCheckBlocks(c.USER_DATA.statistic.gameStats.correctSentence,c.USER_DATA.statistic.gameStats.currentAnswerSentence,this.timer)}},{key:"onClickContinue",value:function(){var t,e=this;this.onClickCard&&this.gameField.removeEventListener("pointerdown",this.onClickCard),this.statisticView.getViewHtml().style.display="none",this.buttonField.hideButton(this.buttonField.resultsButton.getElement()),this.buttonField.hideButton(this.buttonField.continueButton.getElement()),this.buttonField.showButton(this.buttonField.checkButton.getElement()),10===(null===(t=c.USER_DATA)||void 0===t?void 0:t.statistic.gameStats.currentRow)&&(this.gameField.classList.add("animate-on-change"),setTimeout((function(){e.gameField.classList.remove("animate-on-change")}),500)),this.completeRow()}},{key:"onClickResults",value:function(){this.onClickCard&&this.gameField.removeEventListener("pointerdown",this.onClickCard),this.statisticView.getViewHtml().style.display="block",this.statisticView.audioAndLabel.length=0,this.statisticView.fillFields(),this.statisticView.statsWrapper.getElement().scrollTop=0}},{key:"onClickAutoComplete",value:function(){this.autoCompleteFlag=!0;for(var t=Array.from(this.sourceBlock.children).filter((function(t){return t.classList.contains("source-word")})),e=Array.from(this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1].children).filter((function(t){return t.classList.contains("source-word")})),n=[].concat(an(t),an(e)),r=this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1];r.firstElementChild;)r.firstElementChild.remove();n.sort((function(t,e){return Number(t.id.slice(1))-Number(e.id.slice(1))})),n.forEach((function(t){r.append(t),t.classList.remove("paint-wrong","paint-true")})),this.updateAnswerSentence(r),this.checkFullFilledRow(r),this.onDragCardRemove()}},{key:"paintCheckBlocks",value:function(t,e,n){var r=Array.from(this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1].children);n.removeClasses&&(clearTimeout(n.removeClasses),r.forEach((function(t){return t.classList.remove("paint-wrong","paint-true")})));for(var o=0;o<r.length;o+=1)r[o].classList.remove("paint-wrong","paint-true"),r[o].id==="w".concat(o)?r[o].classList.add("paint-true"):r[o].classList.add("paint-wrong");n.removeClasses=setTimeout((function(){r.forEach((function(t){return t.classList.remove("paint-wrong","paint-true")}))}),3e3)}},{key:"onDragCard",value:function(){var t=this.sourceBlock,e=this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1];t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointerup",this.onPointerUp),e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointermove",this.onPointerMove)}},{key:"onDragCardRemove",value:function(){var t=this.sourceBlock,e=this.rowField.children[c.USER_DATA.statistic.gameStats.currentRow-1];t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointermove",this.onPointerMove)}},{key:"wasDraggin",value:function(t,e){var n=Math.abs(t-this.checkDrag.startX),r=Math.abs(e-this.checkDrag.startY);return n>this.checkDrag.DRAX_PX||r>this.checkDrag.DRAX_PX}},{key:"checkFullFilledRow",value:function(t){var e,n=this,r=Array.from(t.children);r.every((function(t){return!t.classList.contains("clear-card")}))?Be(r)?(this.buttonField.showButton(this.buttonField.continueButton.getElement()),this.buttonField.hideButton(this.buttonField.checkButton.getElement()),this.buttonField.hideButton(this.buttonField.autoCompleteButton.getElement()),this.autoCompleteFlag?c.addToUnknown(this.hints.audioFile):c.addToKnown(this.hints.audioFile),this.showHintsAfterSuccess(),this.showBackgroundOnCorrect(),this.onDragCardRemove(),10===(null===(e=c.USER_DATA)||void 0===e?void 0:e.statistic.gameStats.currentRow)&&(setTimeout((function(){n.gameField.classList.add("game-section-open-background"),n.sourceBlock.append(n.showAutor().getElement())}),100),this.buttonField.showButton(this.buttonField.resultsButton.getElement())),this.onClickCard&&this.gameField&&this.gameField.removeEventListener("pointerup",this.onClickCard)):this.buttonField.enableButton(this.buttonField.checkButton.getElement()):this.buttonField.disableButton(this.buttonField.checkButton.getElement())}},{key:"updateAnswerSentence",value:function(t){var e=Array.from(t.children).map((function(t){return t.textContent}));c.USER_DATA.statistic.gameStats.currentAnswerSentence=e.join(" ")}},{key:"onClickTranslationIcon",value:function(){var t=this,e=this.hints.translationIcon.getElement();e.addEventListener("click",(function(){c.USER_DATA.settings.translateHint?t.disableTranslateHint(e):t.enableTranslateHint(e),c.updateStorage()}))}},{key:"enablePronounceHint",value:function(t){t.classList.add("pronounce-hint-button--on"),this.hints.pronounceSentence.getElement().hidden=!1,c.USER_DATA.settings.pronounceHint=!0}},{key:"disablePronounceHint",value:function(t){t.classList.remove("pronounce-hint-button--on"),this.hints.pronounceSentence.getElement().hidden=!0,c.USER_DATA.settings.pronounceHint=!1}},{key:"enableBackgroundHint",value:function(t){t.classList.add("background-hint-button--on"),this.toggleBackground(),c.USER_DATA.settings.backgroundHint=!0}},{key:"disableBackgroundHint",value:function(t){t.classList.remove("background-hint-button--on"),this.toggleBackground(),c.USER_DATA.settings.backgroundHint=!1}},{key:"showHintsAfterSuccess",value:function(){this.hints.translationIcon.getElement().classList.contains("translate-button--off")&&(this.hints.translationSentence.getElement().hidden=!1),this.hints.pronounceSentence.getElement().classList.contains("pronounce-hint-button--on")||(this.hints.pronounceSentence.getElement().hidden=!1)}},{key:"addHintEvents",value:function(){this.onClickTranslationIcon(),this.onPronounceClick(),this.onPronounceHintClick(),this.onBackgroundHintClick()}},{key:"setUserSettings",value:function(){var t=c.USER_DATA.settings;t.translateHint||this.disableTranslateHint(this.hints.translationIcon.getElement()),t.pronounceHint||this.disablePronounceHint(this.hints.pronounceHintIcon.getElement()),t.backgroundHint||this.disableBackgroundHint(this.hints.backgroundHintIcon.getElement())}},{key:"onChangeLevel",value:function(t){var e=t.target.value;c.changeLevel(e),this.collection=xt("./data/wordCollectionLevel".concat(c.USER_DATA.statistic.gameStats.level+1,".json")),this.gameField.removeEventListener("pointerup",this.onClickCard),this.updateRowField(),this.configureGame()}},{key:"onChangeRound",value:function(t){var e=t.target.value;c.changeRound(e),this.selectionField.roundSelect.getElement().value=e,this.gameField.removeEventListener("pointerup",this.onClickCard),this.updateRowField(),this.configureGame()}},{key:"completeRow",value:function(){var t,e=null===(t=c.USER_DATA)||void 0===t?void 0:t.statistic;if(e){if(e.gameStats.currentRow+=1,11===e.gameStats.currentRow){c.saveCompletedRound(),c.clearSentences(),e.gameStats.currentRow=1,this.updateRowField();var n="level ".concat(e.gameStats.level+1);!0===e.roundsCompleted[n][1]&&(this.selectionField.levelSelect.getElement().options[e.gameStats.level].style.backgroundColor="green"),5===e.gameStats.level&&e.gameStats.round===e.gameStats.maxRoundOfLevel?(e.gameStats.level=0,e.gameStats.round=0,this.collection=xt("./data/wordCollectionLevel".concat(e.gameStats.level+1,".json")),this.updateRowField()):e.gameStats.round===e.gameStats.maxRoundOfLevel&&(e.gameStats.level+=1,e.gameStats.round=0,this.collection=xt("./data/wordCollectionLevel".concat(e.gameStats.level+1,".json")),this.updateRowField()),c.updateStorage()}this.gameField.removeEventListener("pointerup",this.onClickCard),this.gameField&&this.configureGame()}}},{key:"showAutor",value:function(){var t,e,n,r=null===(t=c.USER_DATA)||void 0===t?void 0:t.statistic.gameStats.autor,o=null===(e=c.USER_DATA)||void 0===e?void 0:e.statistic.gameStats.year,i=null===(n=c.USER_DATA)||void 0===n?void 0:n.statistic.gameStats.pictureName,a=new f(Lt),u="".concat(r,'   -   "').concat(i,'",   ').concat(o);return a.setTextContent(u),a}},{key:"configureView",value:function(){c.clearSentences(),this.configureGame(),this.updateRowField(),this.addHintEvents(),this.setUserSettings(),this.gameField.append(this.rowField,this.sourceBlock,this.buttonField.getViewHtml()),this.getViewHtml().append(this.selectionField.getViewHtml(),this.hints.getViewHtml(),this.gameField,this.statisticView.getViewHtml())}}],r&&un(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);const vn=gn;function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bn(r.key),r)}}function bn(t){var e=function(t,e){if("object"!=hn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hn(e)?e:e+""}function wn(t,e,n){return e=Sn(e),function(t,e){if(e&&("object"==hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,En()?Reflect.construct(e,n||[],Sn(t).constructor):e.apply(t,n))}function En(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(En=function(){return!!t})()}function Sn(t){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sn(t)}function kn(t,e){return kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kn(t,e)}var _n=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wn(this,e,[{tag:"main",className:["main"]}])).configureView(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kn(t,e)}(e,t),n=e,r=[{key:"configureView",value:function(t){var e=this;t instanceof gt?F.emit("hideLogoutButton"):F.emit("showLogoutButton");for(var n=t.getViewHtml(),r=this.view.getElement();r.firstElementChild;)r.firstElementChild.remove();r.append(n),r.classList.add("smooth-transition"),setTimeout((function(){if(r.classList.remove("smooth-transition"),t instanceof vn){var n,o=null===(n=c.USER_DATA)||void 0===n?void 0:n.statistic.roundsCompleted;if(o)for(var i=0;i<6;i+=1)if(o["level ".concat(i+1)][0].length>0){var a=new At;e.view.getElement().append(a.getViewHtml());break}}}),501)}}],r&&yn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);const An=_n;var Cn="greeting",On="login",Pn="game";function Tn(t){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(t)}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ln(r.key),r)}}function Ln(t){var e=function(t,e){if("object"!=Tn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tn(e)?e:e+""}var Rn=function(){return t=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routes=e,window.addEventListener("DOMContentLoaded",(function(){var t=n.getCorrectPath();t!==Cn&&t!==Pn||c.USER_DATA?t===Pn&&c.USER_DATA||t===On&&c.USER_DATA?n.navigate(Cn):n.navigate(t):n.navigate(On)})),window.addEventListener("popstate",this.browserChangeHandler.bind(this)),window.addEventListener("hashchange",this.browserChangeHandler.bind(this))},e=[{key:"navigate",value:function(t){var e=this.routes.find((function(e){return e.path===t}));e&&(e.callback(),window.location.pathname.slice(1)!==t&&history.pushState(null,"","/english-puzzle/".concat(t)))}},{key:"getCorrectPath",value:function(){return window.location.hash?window.location.hash.slice(1):window.location.pathname.slice(1)}},{key:"browserChangeHandler",value:function(){var t=this.getCorrectPath();this.navigate(t)}}],e&&jn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const Fn=Rn;var Dn={tag:"section",className:["section-greeting"]},Bn={tag:"h2",className:["greeting-title"],textContent:"English Puzzle - Build Your English, Block by Block"},xn={tag:"h3",className:["greeting-description"],textContent:"Engaging game designed to help players learn English through puzzle-solving. Players form correct sentences by connecting words, enhancing their grammar and vocabulary skills. Suitable for all language levels, this game turns learning into a fun and interactive experience!"},Un={tag:"div",className:["interaction-block"]},Nn={tag:"img",className:["greeting-lern-pic","img"]},Hn={tag:"img",className:["greeting-puzzle-pic","img"]},In={tag:"a",className:["greeting-start-button"],textContent:"START"},Vn={tag:"div",className:["user-greeting"]},zn={tag:"h4",className:["user-greeting__title"]};function Yn(t){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gn(r.key),r)}}function Gn(t){var e=function(t,e){if("object"!=Yn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Yn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yn(e)?e:e+""}function Mn(t,e,n){return e=Kn(e),function(t,e){if(e&&("object"==Yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wn()?Reflect.construct(e,n||[],Kn(t).constructor):e.apply(t,n))}function Wn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wn=function(){return!!t})()}function Kn(t){return Kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kn(t)}function Jn(t,e){return Jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jn(t,e)}var $n=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mn(this,e,[Dn])).router=t,n.configureView(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jn(t,e)}(e,t),n=e,r=[{key:"createTitle",value:function(){return new f(Bn)}},{key:"createDescription",value:function(){return new f(xn)}},{key:"createInteractionBlock",value:function(){var t=new f(Un),e=new f(Nn);e.getElement().src="./assets/img/learn-img.png";var n=new f(Hn);n.getElement().src="./assets/img/puzzle-alph.png";var r=this.createStartButton(),o=this.displayUserGreeting();return t.getElement().append(e.getElement(),n.getElement(),o.getElement(),r.getElement()),t}},{key:"getUserInfo",value:function(){var t,e,n=null===(t=c.USER_DATA)||void 0===t?void 0:t.user.firstName,r=null===(e=c.USER_DATA)||void 0===e?void 0:e.user.lastName;return n&&r?[n,r]:["undefined","undefined"]}},{key:"displayUserGreeting",value:function(){var t=new f(Vn),e=new f(zn),n=this.getUserInfo().join(" ");return e.getElement().insertAdjacentHTML("afterbegin",'Hello!<br><span class="user-greeting__span">'.concat(n,"<br></span> Best of luck on your learning journey!")),t.getElement().append(e.getElement()),t}},{key:"createStartButton",value:function(){var t=this,e=new f(In);return e.getElement().addEventListener("click",(function(){t.router.navigate("game")})),e}},{key:"configureView",value:function(){var t=this.createTitle(),e=this.createDescription(),n=this.createInteractionBlock();this.view.getElement().append(t.getElement(),e.getElement(),n.getElement())}}],r&&Xn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);const Zn=$n;var qn={tag:"footer",className:["footer"]},Qn={tag:"p",className:["footer-info"],textContent:"©   2024"},tr={tag:"a",className:["github-link"]};function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rr(r.key),r)}}function rr(t){var e=function(t,e){if("object"!=er(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==er(e)?e:e+""}function or(t,e,n){return e=ar(e),function(t,e){if(e&&("object"==er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ir()?Reflect.construct(e,n||[],ar(t).constructor):e.apply(t,n))}function ir(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ir=function(){return!!t})()}function ar(t){return ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ar(t)}function cr(t,e){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cr(t,e)}const ur=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=or(this,e,[qn])).configureView(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cr(t,e)}(e,t),n=e,(r=[{key:"configureView",value:function(){var t=new f(Qn),e=new f(tr);e.getElement().setAttribute("href","https://github.com/kevaniy0"),e.getElement().setAttribute("target","_blank"),this.view.getElement().append(t.getElement(),e.getElement())}}])&&nr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fr(r.key),r)}}function fr(t){var e=function(t,e){if("object"!=lr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lr(e)?e:e+""}var pr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=new f({tag:"div",className:["container"]}),this.header=null,this.main=null,this.footer=null;var e=this.createRoutes();this.router=new Fn(e),this.run()},e=[{key:"run",value:function(){var t=this.container.getElement();document.body.append(t),this.header=new M(this.router),t.append(this.header.getViewHtml()),c.checkUserExistence()?this.main=new An(new Zn(this.router)):this.main=new An(new gt(this.router)),t.append(this.main.getViewHtml()),this.footer=new ur,t.append(this.footer.getViewHtml())}},{key:"createRoutes",value:function(){var t=this;return[{path:On,callback:function(){t.setContentPages(new gt(t.router))}},{path:Cn,callback:function(){t.setContentPages(new Zn(t.router))}},{path:Pn,callback:function(){t.setContentPages(new vn(t.router))}}]}},{key:"setContentPages",value:function(t){this.main&&this.main.configureView(t)}}],e&&sr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();new pr})();